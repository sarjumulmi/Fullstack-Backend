{"version":3,"sources":["service.js","Filter.js","PersonForm.js","Persons.js","Button.js","Notification.js","App.js","index.js"],"names":["baseURL","getAllPersons","axios","get","then","resp","data","createPerson","newPerson","post","updatePerson","person","id","put","deletePerson","delete","Filter","searchName","handleSearchChange","value","onChange","PersonForm","newName","number","handleNameChange","handleNumberChange","handleFormSubmit","onSubmit","type","Persons","personsToDisplay","Button","handleClick","text","onClick","Notification","msg","console","log","className","App","useState","persons","setPersons","setNewName","setNumber","setSearchName","searchPerson","setSearchPerson","message","setMessage","useEffect","a","personService","fetchPersons","personToDelete","find","window","confirm","name","service","filter","p","setTimeout","catch","err","evt","target","searchedPerson","toLowerCase","includes","undefined","preventDefault","personExists","updatedPerson","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cf1a2976.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nconst getAllPersons = () => {\n  const req = axios.get(baseURL)\n  return req.then(resp => resp.data)\n}\n\nconst createPerson = newPerson => {\n  const req = axios.post(baseURL, newPerson)\n  return req.then(resp => resp.data)\n}\n\nconst updatePerson = (person, id) => {\n  const req = axios.put(`${baseURL}/${id}`, person)\n  return req.then(resp => resp.data)\n}\n\nconst deletePerson = id => {\n  const req = axios.delete(`${baseURL}/${id}`)\n  return req.then(resp => resp.data)\n}\n\nexport default {getAllPersons, createPerson, updatePerson, deletePerson}","import React from 'react';\n\nconst Filter = ({searchName, handleSearchChange}) => (\n  <div>\n    filter shown with <input value={searchName} onChange={handleSearchChange} />\n  </div>\n)\n\nexport default Filter","import React from 'react';\n\nconst PersonForm = ({newName, number, handleNameChange, handleNumberChange, handleFormSubmit}) => (\n  <form onSubmit={handleFormSubmit}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange} />\n      <br />\n      number: <input value={number} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nexport default PersonForm","import React from 'react';\n\nconst Persons = ({personsToDisplay}) => (\n  personsToDisplay()\n) \n\nexport default Persons","import React from 'react';\n\nconst Button = ({handleClick, text}) => (\n  <button onClick={handleClick}>{text}</button>\n)\n\nexport default Button;","import React from 'react'\n\nconst Notification = ({msg}) => {\n  if (msg === null) {\n    return null\n  }\n  const {text, type} = msg\n  console.log('message: ', msg);\n  return (\n    <div className={type}>\n      {text}\n    </div>\n  )\n}\n\nexport default Notification;","import React, {useState, useEffect} from 'react';\nimport personService from './service'\n\nimport Filter from './Filter'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\nimport Button from './Button'\nimport Notification from './Notification'\nimport service from './service';\n\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [number, setNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [searchPerson, setSearchPerson] = useState({})\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    async function fetchPersons () {\n      const resp = await personService.getAllPersons()\n      setPersons(resp)\n    }\n    fetchPersons()\n  }, [])\n\n  const handleNameChange = evt => {\n    setNewName(evt.target.value)\n  }\n\n  const handleNumberChange = evt => {\n    setNumber(evt.target.value)\n  }\n\n  const handleSearchChange = evt => {\n    const value = evt.target.value\n    setSearchName(value)\n    console.log('searched name', searchName);\n    const searchedPerson  = [...persons].filter(person => person.name.toLowerCase().includes(value.toLowerCase()))\n    console.log('searched Person', searchedPerson);\n    if (searchedPerson !== undefined) {\n      setSearchPerson(searchedPerson)\n    } else {\n      setSearchPerson({})\n    }\n  }\n\n  const handleFormSubmit = evt => {\n    evt.preventDefault()\n    const personExists = persons.find(person => person.name === newName)\n    if (personExists && window.confirm(`${newName} already exists, update phonebook with new number?`)) {\n      service.updatePerson({name: newName, number: number}, personExists.id)\n        .then(updatedPerson => {\n          setPersons([...persons.map(p => personExists.id === p.id ? updatedPerson : p )])\n          setMessage({text: `${updatedPerson.name}'s number updated in the Phonebook`, type: 'success'})\n          setNewName('')\n          setNumber('')\n          setTimeout(() => {\n            console.log('message: ', message);\n            setMessage(null)\n          }, 5000)\n        })\n    } else {\n      service.createPerson({name: newName, number: number})\n        .then(newPerson => {\n          setPersons([...persons, newPerson])\n          setMessage({text:`${newPerson.name} added to Phonebook`, type: 'success'})\n          setNewName('')\n          setNumber('')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n    }) \n    }\n  }\n\n  const deletePerson = id => {\n    const personToDelete = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      console.log(id);\n      service.deletePerson(id)\n      .then(() => {\n        setPersons([...persons.filter(p => p.id !== id)])\n        setMessage({text:`${personToDelete.name} deleted.`, type: 'info'})\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(err => {\n        setPersons([...persons.filter(p => p.id !== id)])\n        setMessage({text:`${personToDelete.name} doesnot exist in the server.`, type: 'error'})\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  const personsToDisplay = () => {\n    if (searchName === '') {\n      return (\n        persons.map(person => (\n          <div key={person.name}>\n          {person.name} {person.number}\n          <Button text=\"delete\" handleClick={()=>{deletePerson(person.id)}}/>\n          </div>\n      ))\n      )\n    } else if (searchPerson.length > 0) {\n      console.log('matching person', searchPerson);\n      return (\n        searchPerson.map(person => (\n          <div key={person.name}>\n          {person.name} {person.number}\n          <Button text=\"delete\" handleClick={()=>{deletePerson(person.id)}}/>\n          </div>\n        )\n      ))\n    } else {\n      console.log('no matching person');\n      return (\n        <div>No matching person found</div>\n        )\n    }\n  }\n\n  return (\n    <div>\n      <Notification msg={message} />\n      <h2>Phonebook</h2>\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\n      <h2>Add a new</h2>\n      <PersonForm newName={newName} number={number} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} handleFormSubmit={handleFormSubmit}/>\n      <h2>Numbers</h2>\n      <Persons personsToDisplay={personsToDisplay} />\n    </div>\n  )\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n"],"sourceRoot":""}